easyblock = 'PythonBundle'

name = 'Spyder'
version = '5.0.5'

homepage = 'https://github.com/spyder-ide/spyder'
description = """Spyder is an interactive Python development environment providing MATLAB-like features in a simple
 and light-weighted software."""

toolchain = {'name': 'intel', 'version': '2020b'}
toolchainopts = {'cstd': 'c++11'}

builddependencies = [
    ('CMake', '3.18.4'),
]
dependencies = [
    ('Python', '3.8.6'),
    ('ZeroMQ', '4.3.3'),
    ('PyQt5', '5.15.1'),
    ('IPython', '7.18.1'),
    ('geopandas', '0.9.0'),
    ('libspatialindex', '1.9.3'),
]

use_pip = True

exts_default_options = {'source_urls': [PYPI_SOURCE]}

# strip out (too strict version) requirements for pyqt5 and pyqtwebengine,
# because they are not installed with pip, but are provided via the PyQt5 dependency
local_spyder_preinstallopts = (
    """sed -i "s/'pyqt5.*,//g" setup.py && """
    """sed -i "s/'pyqtwebengine.*,//g" setup.py && """
)

exts_list = [
    ('astroid', '2.6.5', {
        'checksums': ['83e494b02d75d07d4e347b27c066fd791c0c74fc96c613d1ea3de0c82c48168f'],
    }),
    ('async_generator', '1.10', {
        'checksums': ['6ebb3d106c12920aaae42ccb6f787ef5eefdcdd166ea3d628fa8476abe712144'],
    }),
    ('autopep8', '1.5.7', {
        'checksums': ['276ced7e9e3cb22e5d7c14748384a5cf5d9002257c0ed50c0e075b68011bb6d0'],
    }),
    ('binaryornot', '0.4.4', {
        'checksums': ['359501dfc9d40632edc9fac890e19542db1a287bbcfa58175b66658392018061'],
    }),
    ('bleach', '3.3.1', {
        'checksums': ['306483a5a9795474160ad57fce3ddd1b50551e981eed8e15a582d34cef28aafa'],
    }),
    ('cloudpickle', '1.6.0', {
        'checksums': ['9bc994f9e9447593bd0a45371f0e7ac7333710fcf64a4eb9834bf149f4ef2f32'],
    }),
    ('cookiecutter', '1.7.3', {
        'checksums': ['6b9a4d72882e243be077a7397d0f1f76fe66cf3df91f3115dbb5330e214fa457'],
    }),
    ('decorator', '5.0.9', {
        'checksums': ['72ecfba4320a893c53f9706bebb2d55c270c1e51a28789361aa93e4a21319ed5'],
    }),
    ('diff-match-patch', '20200713', {
        'checksums': ['da6f5a01aa586df23dfc89f3827e1cafbb5420be9d87769eeb079ddfd9477a18'],
    }),
    ('flake8', '3.9.2', {
        'checksums': ['07528381786f2a6237b061f6e96610a4167b226cb926e2aa2b6b1d78057c576b'],
    }),
    ('helpdev', '0.7.1', {
        'checksums': ['bb62a79acbac141dadf42cadeb92bb7450dd18b9824a62043b6a0b149190db3d'],
    }),
    ('isort', '5.9.2', {
        'use_pip': False,
        'checksums': ['f65ce5bd4cbc6abdfbe29afc2f0245538ab358c14590912df638033f157d555e'],
    }),
    ('jedi', '0.17.2', {
        'checksums': ['86ed7d9b750603e4ba582ea8edc678657fb4007894a12bcf6f4bb97892f31d20'],
    }),
    ('jeepney', '0.7.0', {
        'use_pip': False,
        'checksums': ['1237cd64c8f7ac3aa4b3f332c4d0fb4a8216f39eaa662ec904302d4d77de5a54'],
    }),
    ('arrow', '1.1.1', {
        'checksums': ['dee7602f6c60e3ec510095b5e301441bc56288cb8f51def14dcb3079f623823a'],
    }),
    ('jinja2-time', '0.2.0', {
        'checksums': ['d14eaa4d315e7688daa4969f616f226614350c48730bfa1692d2caebd8c90d40'],
    }),
    ('jupyterlab_pygments', '0.1.2', {
        'checksums': ['cfcda0873626150932f438eccf0f8bf22bfa92345b814890ab360d666b254146'],
    }),
    ('importlib_metadata', '4.6.1', {
        'checksums': ['079ada16b7fc30dfbb5d13399a5113110dab1aa7c2bc62f66af75f0b717c8cac'],
    }),
    ('keyring', '21.8.0', {
        'preinstallopts': """sed -i 's/setup()/setup(version="%(version)s")/g' setup.py && """,
        'checksums': ['1746d3ac913d449a090caf11e9e4af00e26c3f7f7e81027872192b2398b98675'],
    }),
    ('keyrings.alt', '4.1.0', {
        'preinstallopts': """sed -i 's/setup()/setup(version="%(version)s")/g' setup.py && """,
        'checksums': ['52ccb61d6f16c10f32f30d38cceef7811ed48e086d73e3bae86f0854352c4ab2'],
    }),
    ('lazy-object-proxy', '1.6.0', {
        'checksums': ['489000d368377571c6f982fba6497f2aa13c6d1facc40660963da62f5c379726'],
    }),
    ('mccabe', '0.6.1', {
        'checksums': ['dd8d182285a0fe56bace7f45b5e7d1a6ebcbf524e8f3bd87eb0f125271b8831f'],
    }),
    ('jupyter_client', '6.1.12', {
        'checksums': ['c4bca1d0846186ca8be97f4d2fa6d2bae889cce4892a167ffa1ba6bd1f73e782'],
    }),
    ('nbclient', '0.5.3', {
        'checksums': ['db17271330c68c8c88d46d72349e24c147bb6f34ec82d8481a8f025c4d26589c'],
    }),
    ('nest_asyncio', '1.5.1', {
        'checksums': ['afc5a1c515210a23c461932765691ad39e8eba6551c055ac8d5546e69250d0aa'],
    }),
    ('numpydoc', '1.1.0', {
        'checksums': ['c36fd6cb7ffdc9b4e165a43f67bf6271a7b024d0bb6b00ac468c9e2bfc76448e'],
    }),
    ('pathtools', '0.1.2', {
        'checksums': ['7c35c5421a39bb82e58018febd90e3b6e5db34c5443aaaf742b3f33d4655f1c0'],
    }),
    ('poyo', '0.5.0', {
        'checksums': ['e26956aa780c45f011ca9886f044590e2d8fd8b61db7b1c1cf4e0869f48ed4dd'],
    }),
    ('pycodestyle', '2.7.0', {
        'checksums': ['c389c1d06bf7904078ca03399a4816f974a1d590090fecea0c63ec26ebaf1cef'],
    }),
    ('pydocstyle', '6.1.1', {
        'checksums': ['1d41b7c459ba0ee6c345f2eb9ae827cab14a7533a88c5c6f7e94923f72df92dc'],
    }),
    ('pyflakes', '2.3.1', {
        'checksums': ['f5bc8ecabc05bb9d291eb5203d6810b49040f6ff446a756326104746cc00c1db'],
    }),
    ('isort', '5.9.2', {
        'checksums': ['f65ce5bd4cbc6abdfbe29afc2f0245538ab358c14590912df638033f157d555e'],
    }),
    ('pylint', '2.9.5', {
        'checksums': ['1f333dc72ef7f5ea166b3230936ebcfb1f3b722e76c980cb9fe6b9f95e8d3172'],
    }),
    ('ujson', '4.0.2', {
        'checksums': ['c615a9e9e378a7383b756b7e7a73c38b22aeb8967a8bfbffd4741f7ffd043c4d'],
    }),
    ('python-language-server', '0.36.2', {
        'modulename': 'pyls',
        'checksums': ['9984c84a67ee2c5102c8e703215f407fcfa5e62b0ae86c9572d0ada8c4b417b0'],
    }),
    ('pyrsistent', '0.18.0', {
        'checksums': ['773c781216f8c2900b42a7b638d5b517bb134ae1acbebe4d1e8f1f41ea60eb4b'],
    }),
    ('python-jsonrpc-server', '0.4.0', {
        'modulename': 'pyls_jsonrpc',
        'checksums': ['62c543e541f101ec5b57dc654efc212d2c2e3ea47ff6f54b2e7dcb36ecf20595'],
    }),
    ('python-slugify', '5.0.2', {
        'modulename': 'slugify',
        'checksums': ['f13383a0b9fcbe649a1892b9c8eb4f8eab1d6d84b84bb7a624317afa98159cab'],
    }),
    ('pyxdg', '0.27', {
        'modulename': 'xdg',
        'checksums': ['80bd93aae5ed82435f20462ea0208fb198d8eec262e831ee06ce9ddb6b91c5a5'],
    }),
    ('rope', '0.19.0', {
        'checksums': ['64e6d747532e1f5c8009ec5aae3e5523a5bcedf516f39a750d57d8ed749d90da'],
    }),
    ('QDarkStyle', '3.0.2', {
        'checksums': ['55d149cf5f40ee297397f1818e091118cefb855a4a9c5c38566c47acd2d8c7ae'],
    }),
    ('QtAwesome', '1.0.3', {
        'checksums': ['d37bbeb69ddc591e5ff036b741bda8d1d92133811f1f5a7150021506f70b8e6e'],
    }),
    ('qtconsole', '5.1.1', {
        'checksums': ['bbc34bca14f65535afcb401bc74b752bac955e5313001ba640383f7e5857dc49'],
    }),
    ('QtPy', '1.9.0', {
        'checksums': ['2db72c44b55d0fe1407be8fba35c838ad0d6d3bb81f23007886dc1fc0f459c8d'],
    }),
    ('SecretStorage', '3.3.1', {
        'modulename': 'secretstorage',
        'checksums': ['fd666c51a6bf200643495a04abb261f83229dcb6fd8472ec393df7ffc8b6f195'],
    }),
    ('three-merge', '0.1.1', {
        'checksums': ['60f6afe144595560d63ae32625351bcef3b94733b54eb97800a9feb0f3d9d970'],
    }),
    ('parso', '0.7.0', {
        'checksums': ['908e9fae2144a076d72ae4e25539143d40b8e3eafbaeae03c1bfe226f4cdf12c'],
    }),
    ('Rtree', '0.9.7', {
        'checksums': ['be8772ca34699a9ad3fb4cfe2cfb6629854e453c10b3328039301bbfc128ca3e'],
    }),
    ('spyder', version, {
        'preinstallopts': """sed -i "s/'pyqt5.*,//g" setup.py && sed -i "s/'pyqtwebengine.*,//g" setup.py && """,
        'checksums': ['b1b5c06b5cd9902f9746a083fd760bb4de3fa4129bc8c1c1ef2bcd84002bc45f'],
    }),
    ('spyder-kernels', '2.0.5', {
        'modulename': 'spyder_kernels',
        'checksums': ['4428a9aa8f94987f366fad3afda427933a131cca5fd9c361c8553c564eae011e'],
    }),
    ('text-unidecode', '1.3', {
        'checksums': ['bad6603bb14d279193107714b288be206cac565dfa49aa5b105294dd5c4aab93'],
    }),
    ('traitlets', version, {
        'checksums': ['178f4ce988f69189f7e523337a3e11d91c786ded9360174a3d9ca83e79bc5396'],
    }),
    ('typed_ast', '1.4.3', {
        'checksums': ['fb1bbeac803adea29cedd70781399c99138358c26d05fcbd23c13016b7f5ec65'],
    }),
    ('watchdog', '2.1.3', {
        'checksums': ['e5236a8e8602ab6db4b873664c2d356c365ab3cac96fbdec4970ad616415dd45'],
    }),
    ('wurlitzer', '2.1.1', {
        'checksums': ['5a3ea5a13a8aac2d808864087fec87a0518bf7d9776173ab06a6bb4ade9f4d27'],
    }),
    ('wrapt', '1.12.1', {
        'checksums': ['b62ffa81fb85f4332a4f609cab4ac40709470da05643a082ec1eb88e6d9b97d7'],
    }),
    ('yapf', '0.31.0', {
        'checksums': ['408fb9a2b254c302f49db83c59f9aa0b4b0fd0ec25be3a5c51181327922ff63d'],
    }),
    ('typing-extensions', '3.10.0.0', {
        'sources': ['typing_extensions-%(version)s.tar.gz'],
        'checksums': ['50b6f157849174217d0656f99dc82fe932884fb250826c18350e159ec6cdf342'],
    }),
    ('pathspec', '0.9.0', {
        'checksums': ['e564499435a2673d586f6b2130bb5b95f04a3ba06f81b8f895b651a3c76aabb1'],
    }),
    ('mypy-extensions', '0.4.3', {
        'sources': ['mypy_extensions-%(version)s.tar.gz'],
        'checksums': ['2d82818f5bb3e369420cb3c4060a7970edba416647068eb4c5343488a6c604a8'],
    }),
    ('flit_core', '3.2.0', {
        'checksums': ['ff87f25c5dbc24ef30ea334074e35030e4885e4c5de3bf4e21f15746f6d99431'],
    }),
    ('tomli', '1.1.0', {
        'checksums': ['33d7984738f8bb699c9b0a816eb646a8178a69eaa792d258486776a5d21b8ca5'],
    }),
    ('black', '21.7b0', {
        'checksums': ['c8373c6491de9362e39271630b65b964607bc5c79c83783547d76c839b3aa219'],
    }),
    ('pyls-black', '0.4.7', {
        'checksums': ['6e087adca067391a65a577676ea2d62f0a6cb2bf23bf45dbefbbd48c0d2bb8d4'],
    }),
    ('python-lsp-jsonrpc', '1.0.0', {
        'modulename': 'pylsp_jsonrpc',
        'checksums': ['7bec170733db628d3506ea3a5288ff76aa33c70215ed223abdb0d95e957660bd'],
    }),
    ('python-lsp-server', '1.1.0', {
        'modulename': 'pylsp',
        'checksums': ['50ca0639b11a635cac42ff4334a3944a7a91361cf888489321a4273701ff9068'],
    }),
    ('pyls-spyder', '0.3.2', {
        'checksums': ['f2be1b05f2c7a72565b28de7289d2c2b16052b88e46914279a2d631e074ed158'],
    }),
    ('inflection', '0.5.1', {
        'checksums': ['1a29730d366e996aaacffb2f1f1cb9593dc38e2ddd30c91250c6dde09ea9b417'],
    }),
    ('tinycss2', '1.1.0', {
        'checksums': ['fbdcac3044d60eb85fdb2aa840ece43cf7dbe798e373e6ee0be545d4d134e18a'],
    }),
    ('qstylizer', '0.2.0', {
        'sources': ['%(name)s-%(version)s-py2.py3-none-any.whl'],
        'unpack_sources': False,
        'checksums': ['4f3385f6f0d91e1277e0b8255cffc81502e7ea1aa56193cbb2f710caa08d0bf1'],
    }),
    ('textdistance', '4.2.1', {
        'checksums': ['46f8df3b26c7f319ab500b417047f61b85c2dd221781cb02f6c9136e5f1c9284'],
    }),
]

sanity_check_paths = {
    'files': ['bin/spyder'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

sanity_check_commands = ["spyder --help"]

sanity_pip_check = True

moduleclass = 'tools'
