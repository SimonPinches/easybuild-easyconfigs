easyblock = 'ConfigureMake'

name = 'GR'
version = '0.64.0'

homepage = 'https://gr-framework.org/index.html'
description = """
 GR is a universal framework for cross-platform visualization applications.
 It offers developers a compact, portable and consistent graphics library for their programs.
 Applications range from publication quality 2D graphs to the representation of complex 3D scenes.
"""

toolchain = {'name': 'GCCcore', 'version': '10.2.0'}
toolchainopts = {'pic': True}

source_urls = ['https://github.com/sciapp/gr/archive/']
sources = ['v%(version)s.zip']
checksums = ['92f6db888ba2b1a0563b037d3aec8a49f2432c4366aaec6c5a34a71138a830ac']

builddependencies = [
    ('binutils', '2.35'),
    ('CMake', '3.18.4')
]

dependencies = [
    ('Python', '3.8.6'),
    ('texlive', '20210216'),
    ('PyQt5', '5.15.1'),
    ('X11', '20201008'),
    ('GTK+', '3.24.23'),
    ('Ghostscript', '9.53.3'),
    ('GLFW', '3.3.3'),
    ('ZeroMQ', '4.3.3'),
    ('FFmpeg', '4.3.1'),
    ('cairo', '1.16.0'),
    ('LibTIFF', '4.1.0'),
]

skipsteps = ['configure']

parallel = 1

buildopts = 'GRDIR=%(installdir)s'

installopts = 'GRDIR=%(installdir)s'

modextrapaths = {'PYTHONPATH':'lib/python'}

sanity_check_paths = {
    'files': ['lib/libGR.a', 'lib64/libGR.a'],
    'dirs': ['lib'],
}

moduleclass = 'numlib'
